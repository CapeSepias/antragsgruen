{"version":3,"sources":["shared/SiteCreateWizard.ts"],"names":["SiteCreateWizard","$root","this","firstPanel","$","data","mode","initEvents","prototype","getRadioValue","fieldsetClass","defaultVal","$input","find","length","val","getCheckboxValues","defaultVals","inputs","toArray","map","element","parseInt","getAttribute","getWizardState","language","functionality","singleMotion","motionsInitiatedBy","motionsDeadlineExists","motionsDeadline","motionScreening","needsSupporters","minSupporters","hasAmendments","amendSinglePara","amendMerging","amendmentInitiatedBy","amendmentDeadlineExists","amendmentDeadline","amendScreening","hasComments","hasAgenda","openNow","title","organization","subdomain","contact","showPanel","$panel","console","log","step","removeClass","addClass","$activePanel","trigger","isCorrect","window","location","hash","attr","substring","e","getNextPanel","subdomainChange","ev","_this","$this","currentTarget","$group","parents","first","requesturl","replace","$err","match","get","ret","prop","html","$form","on","$fieldset","wording","each","datetimepicker","locale","bind","original","originalEvent","charCode","keyCode","preventDefault","url","href","obj","key","stopPropagation","history","back"],"mappings":"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","file":"SiteCreateWizard.js","sourcesContent":["interface WizardState {\n    language: string;\n    functionality: number[];\n    singleMotion: number;\n    motionsInitiatedBy: number;\n    motionsDeadlineExists: number;\n    motionsDeadline: string;\n    motionScreening: number;\n    needsSupporters: number;\n    minSupporters: number;\n    hasAmendments: number;\n    amendSinglePara: number;\n    amendMerging: number;\n    amendmentInitiatedBy: number;\n    amendmentDeadlineExists: number;\n    amendmentDeadline: string;\n    amendScreening: number;\n    hasComments: number;\n    hasAgenda: number;\n    openNow: number;\n    title: string;\n    organization: string;\n    subdomain: string;\n    contact: string;\n}\n\nclass SiteCreateWizard {\n    private firstPanel: string;\n    private mode: string;\n    private data: WizardState;\n    private $activePanel: JQuery;\n\n    constructor(private $root: JQuery) {\n        this.firstPanel = $(\"#SiteCreateWizard\").data(\"init-step\");\n        this.mode = $(\"#SiteCreateWizard\").data(\"mode\");\n        this.initEvents();\n    }\n\n    getRadioValue(fieldsetClass: string, defaultVal: any): any {\n        let $input = this.$root.find(\"fieldset.\" + fieldsetClass).find(\"input:checked\");\n        if ($input.length > 0) {\n            return $input.val();\n        } else {\n            return defaultVal;\n        }\n    }\n\n    getCheckboxValues(fieldsetClass: string, defaultVals: any): any {\n        let inputs = this.$root.find(\"fieldset.\" + fieldsetClass).find(\"input:checked\").toArray();\n        if (inputs.length > 0) {\n            return inputs.map((element: HTMLElement) => {\n                return parseInt(element.getAttribute('value'), 10);\n            });\n        } else {\n            return defaultVals;\n        }\n    }\n\n    getWizardState(): WizardState {\n        const parseNullableNumber = (val: string): number => {\n            if (val === '' || val === null) {\n                return null;\n            } else {\n                return parseInt(val, 10);\n            }\n        };\n\n        return {\n            language: this.getRadioValue('language', null),\n            functionality: this.getCheckboxValues('functionality', []),\n            singleMotion: this.getRadioValue('singleMotion', 0),\n            motionsInitiatedBy: this.getRadioValue('motionWho', 1),\n            motionsDeadlineExists: this.getRadioValue('motionDeadline', 0),\n            motionsDeadline: this.$root.find(\"fieldset.motionDeadline .date input\").val() as string,\n            motionScreening: this.getRadioValue('motionScreening', 1),\n            needsSupporters: this.getRadioValue('needsSupporters', 0),\n            minSupporters: parseNullableNumber(this.$root.find(\"input.minSupporters\").val() as string),\n            hasAmendments: this.getRadioValue('hasAmendments', 1),\n            amendSinglePara: this.getRadioValue('amendSinglePara', 0),\n            amendMerging: this.getRadioValue('amendMerging', 0),\n            amendmentInitiatedBy: this.getRadioValue('amendmentWho', 1),\n            amendmentDeadlineExists: this.getRadioValue('amendmentDeadline', 0),\n            amendmentDeadline: this.$root.find(\"fieldset.amendmentDeadline .date input\").val() as string,\n            amendScreening: this.getRadioValue('amendScreening', 1),\n            hasComments: this.getRadioValue('hasComments', 1),\n            hasAgenda: this.getRadioValue('hasAgenda', 0),\n            openNow: this.getRadioValue('openNow', 0),\n            title: $(\"#siteTitle\").val() as string,\n            organization: $(\"#siteOrganization\").val() as string,\n            subdomain: $(\"#siteSubdomain\").val() as string,\n            contact: $(\"#siteContact\").val() as string\n        };\n    };\n\n    showPanel($panel: JQuery) {\n        this.data = this.getWizardState();\n        console.log(this.data);\n\n        let step = $panel.data(\"tab\");\n        this.$root.find(\".wizard .steps li\").removeClass(\"active\");\n        this.$root.find(\".wizard .steps .\" + step).addClass(\"active\");\n\n        if (this.$activePanel) {\n            this.$activePanel.removeClass(\"active\").addClass(\"inactive\");\n        }\n        $panel.addClass(\"active\").removeClass(\"inactive\");\n        this.$activePanel = $panel;\n\n        if ($panel.find(\"input:checked\").length > 0) {\n            $panel.find(\"input:checked\").trigger(\"focus\");\n        } else if ($panel.find(\"button[type=submit]\").length > 0) {\n            $panel.find(\"button[type=submit]\").trigger(\"focus\");\n        }\n\n        try {\n            let isCorrect = (window.location.hash == \"#\" + $panel.attr(\"id\"));\n            if ((window.location.hash == \"\" || window.location.hash == \"#\") && \"#\" + $panel.attr(\"id\") == this.firstPanel) {\n                isCorrect = true;\n            }\n            if (!isCorrect) {\n                window.location.hash = \"#\" + $panel.attr(\"id\").substring(5);\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    getNextPanel(): string {\n        this.data = this.getWizardState();\n\n        switch (this.$activePanel.attr(\"id\")) {\n            case 'panelFunctionality':\n                return \"#panelSingleMotion\";\n            case 'panelLanguage':\n                return \"#panelSingleMotion\";\n            case 'panelSingleMotion':\n                if (this.data.singleMotion == 1) {\n                    return \"#panelHasAmendments\";\n                } else {\n                    return \"#panelMotionWho\";\n                }\n            case 'panelMotionWho':\n                if (this.data.motionsInitiatedBy == 1) { // MOTION_INITIATED_ADMINS\n                    return \"#panelHasAmendments\";\n                } else {\n                    return \"#panelMotionDeadline\";\n                }\n            case 'panelMotionDeadline':\n                return \"#panelMotionScreening\";\n            case 'panelMotionScreening':\n                return \"#panelNeedsSupporters\";\n            case 'panelNeedsSupporters':\n                return \"#panelHasAmendments\";\n            case 'panelHasAmendments':\n                if (this.data.hasAmendments == 1) {\n                    return \"#panelAmendSinglePara\";\n                } else {\n                    return \"#panelComments\";\n                }\n            case 'panelAmendSinglePara':\n                return \"#panelAmendWho\";\n            case 'panelAmendWho':\n                if (this.data.amendmentInitiatedBy == 1) { // MOTION_INITIATED_ADMINS\n                    return \"#panelComments\";\n                } else {\n                    return \"#panelAmendDeadline\";\n                }\n            case 'panelAmendDeadline':\n                return '#panelAmendMerging';\n            case 'panelAmendMerging':\n                return \"#panelAmendScreening\";\n            case 'panelAmendScreening':\n                return \"#panelComments\";\n            case 'panelComments':\n                if (this.data.singleMotion == 1) {\n                    return \"#panelOpenNow\";\n                } else {\n                    return \"#panelAgenda\";\n                }\n            case 'panelAgenda':\n                return \"#panelOpenNow\";\n            case 'panelOpenNow':\n                return \"#panelSiteData\";\n        }\n    }\n\n    subdomainChange(ev) {\n        let $this = $(ev.currentTarget),\n            subdomain = $this.val() as string,\n            $group = $this.parents(\".subdomainRow\").first(),\n            requesturl = $this.data(\"query-url\").replace(/SUBDOMAIN/, subdomain),\n            $err = $group.find(\".subdomainError\");\n\n        if (subdomain === \"\") {\n            $err.addClass(\"hidden\");\n            $group.removeClass(\"has-error\").removeClass(\"has-success\");\n            return;\n        }\n        if (!subdomain.match(/^[A-Z0-9äöü](?:[A-Z0-9äöü_\\-]{0,61}[A-Z0-9äöü])?$/i)) {\n            $group.removeClass(\"has-success\").addClass(\"has-error\");\n            this.$root.find(\"button[type=submit]\").prop(\"disabled\", true);\n            return;\n        }\n        $.get(requesturl, (ret) => {\n            if (ret['available']) {\n                $err.addClass(\"hidden\");\n                $group.removeClass(\"has-error\");\n                this.$root.find(\"button[type=submit]\").prop(\"disabled\", false);\n                if (ret['subdomain'] == $this.val()) {\n                    $group.addClass(\"has-success\");\n                }\n            } else {\n                $err.removeClass(\"hidden\");\n                $err.html($err.data(\"template\").replace(/%SUBDOMAIN%/, ret['subdomain']));\n                $group.removeClass(\"has-success\");\n                if (ret['subdomain'] == $this.val()) {\n                    this.$root.find(\"button[type=submit]\").prop(\"disabled\", true);\n                    $group.addClass(\"has-error\");\n                }\n            }\n        });\n    }\n\n    initEvents() {\n        let $form = this.$root;\n\n        this.$activePanel = null;\n        this.data = this.getWizardState();\n\n        $form.find(\"input\").on(\"change\", () => {\n            this.data = this.getWizardState();\n        });\n        $form.find(\".radio-label input\").on(\"change\", function () {\n            let $fieldset = $(this).parents(\"fieldset\").first();\n            $fieldset.find(\".radio-label\").removeClass(\"active\");\n            let $active = $fieldset.find(\".radio-label input:checked\");\n            $active.parents(\".radio-label\").first().addClass(\"active\");\n        }).trigger(\"change\");\n        $form.find(\".checkbox-label input\").on(\"change\", function () {\n            let $this = $(this);\n            if ($this.prop(\"checked\")) {\n                $this.parents(\".checkbox-label\").first().addClass(\"active\");\n            } else {\n                $this.parents(\".checkbox-label\").first().removeClass(\"active\");\n            }\n        }).trigger(\"change\");\n\n        $form.find(\"fieldset.wording input\").on(\"change\", function () {\n            let wording = $form.find(\"fieldset.wording input:checked\").data(\"wording-name\");\n            $form.removeClass(\"wording_motion\").removeClass(\"wording_manifesto\").addClass(\"wording_\" + wording);\n        }).trigger(\"change\");\n\n        $form.find(\".input-group.date\").each(function () {\n            let $this = $(this);\n            $this.datetimepicker({\n                locale: $this.find(\"input\").data('locale')\n            });\n        });\n        $form.find(\".date.motionsDeadline\").on(\"dp.change\", function () {\n            $(\"input.motionsDeadlineExists\").prop(\"checked\", true).trigger(\"change\");\n        });\n        $form.find(\".date.amendmentDeadline\").on(\"dp.change\", function () {\n            $(\"input.amendDeadlineExists\").prop(\"checked\", true).trigger(\"change\");\n        });\n        $form.find(\"input.minSupporters\").on(\"change\", () => {\n            $(\"input.needsSupporters\").prop(\"checked\", true).trigger(\"change\");\n        });\n        $form.find(\"#siteSubdomain\").on(\"keyup change\", this.subdomainChange.bind(this));\n        $form.find(\"#siteTitle\").on(\"keyup change\", function () {\n            if (($(this).val() as string).length >= 5) {\n                $(this).parents(\".form-group\").first().addClass(\"has-success\");\n            } else {\n                $(this).parents(\".form-group\").first().removeClass(\"has-success\");\n            }\n        });\n        $form.find(\"#siteOrganization\").on(\"keyup change\", function () {\n            if (($(this).val() as string).length >= 5) {\n                $(this).parents(\".form-group\").first().addClass(\"has-success\");\n            } else {\n                $(this).parents(\".form-group\").first().removeClass(\"has-success\");\n            }\n        });\n\n        $form.find(\"#panelSiteData input\").on(\"keypress\", function (ev) {\n            let original: any = ev.originalEvent;\n            if (original.charCode === 13 || original.keyCode === 13) {\n                ev.preventDefault();\n            }\n        });\n\n        $form.find(\"#panelLanguage input\").on(\"change\", function() {\n            const val = $form.find(\"#panelLanguage input:checked\").val() as string;\n            const url = $form.find(\"#panelLanguage\").data(\"url\").replace(/LNG/, val);\n            window.location.href = url;\n        });\n\n        let obj = this;\n\n        // The enter key should not submit the form, but lead to the next panel\n        $form.on(\"keypress\", (ev) => {\n            if (ev.key === \"Enter\") {\n                if (this.$activePanel.find(\".btn-next\").attr(\"type\") !== \"submit\") {\n                    ev.preventDefault();\n                    ev.stopPropagation();\n                    this.showPanel($(obj.getNextPanel()));\n                }\n            }\n        });\n\n        $form.find(\".navigation .btn-next\").on(\"click\", (ev) => {\n            if ($(ev.currentTarget).attr(\"type\") === \"submit\") {\n                return;\n            }\n            ev.preventDefault();\n            obj.showPanel($(obj.getNextPanel()));\n        });\n        $form.find(\".navigation .btn-prev\").on(\"click\", (ev) => {\n            ev.preventDefault();\n            if (window.location.hash != \"\") {\n                window.history.back();\n            }\n        });\n\n        $(window).on(\"hashchange\", (ev) => {\n            ev.preventDefault();\n            let hash;\n            if (parseInt(window.location.hash.substring(1)) === 0) {\n                hash = this.firstPanel;\n            } else {\n                hash = \"#panel\" + window.location.hash.substring(1);\n            }\n            let $panel = $(hash);\n            if ($panel.length > 0) {\n                this.showPanel($panel);\n            }\n        });\n\n        $form.find(\".step-pane\").addClass(\"inactive\");\n        this.showPanel($(this.firstPanel));\n    }\n}\n\n"]}