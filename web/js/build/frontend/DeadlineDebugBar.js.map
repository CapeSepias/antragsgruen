{"version":3,"sources":["frontend/DeadlineDebugBar.ts"],"names":["DeadlineDebugBar","$widget","this","csrf","find","val","submit","ev","preventDefault","click","$","post","attr","_csrf","action","ret","window","location","href","alert","$picker","datetimepicker","locale","data","time","exports"],"mappings":"yGAAA,IAAAA,EAAA,WAuCA,OAtCI,SAAoBC,GAAAC,KAAAD,QAAAA,EAChB,IAAME,EAAOF,EAAQG,KAAK,uBAAuBC,MAEjDJ,EAAQK,OAAO,SAAAC,GAAM,OAAAA,EAAGC,mBAExBP,EAAQG,KAAK,oBAAoBK,MAAM,WACnCC,EAAEC,KAAKV,EAAQW,KAAK,WAChBC,MAASV,EACTW,OAAU,SACX,SAACC,GACIA,EAAa,QACbC,OAAOC,SAAWD,OAAOC,SAASC,KAElCC,MAAMJ,EAAW,WAK7B,IAAMK,EAAUnB,EAAQG,KAAK,sBAC7BgB,EAAQC,gBACJC,OAAQF,EAAQhB,KAAK,SAASmB,KAAK,YAGvCtB,EAAQG,KAAK,YAAYK,MAAM,WAC3B,IAAMe,EAAOJ,EAAQhB,KAAK,SAASC,MACnCK,EAAEC,KAAKV,EAAQW,KAAK,WAChBC,MAASV,EACTW,OAAU,UACVU,KAAQA,GACT,SAACT,GACIA,EAAa,QACbC,OAAOC,SAAWD,OAAOC,SAASC,KAElCC,MAAMJ,EAAW,YAlCrC,GAAaU,EAAAzB,iBAAAA","file":"DeadlineDebugBar.js","sourcesContent":["export class DeadlineDebugBar {\n    constructor(private $widget: JQuery) {\n        const csrf = $widget.find('> input[name=_csrf]').val();\n\n        $widget.submit(ev => ev.preventDefault());\n\n        $widget.find('.closeCol button').click(() => {\n            $.post($widget.attr('action'), {\n                '_csrf': csrf,\n                'action': 'close'\n            }, (ret) => {\n                if (ret['success']) {\n                    window.location = window.location.href; // Reload ignoring POST data\n                } else {\n                    alert(ret['error']);\n                }\n            });\n        });\n\n        const $picker = $widget.find('#simulateAdminTime');\n        $picker.datetimepicker({\n            locale: $picker.find('input').data('locale')\n        });\n        \n        $widget.find('.setTime').click(() => {\n            const time = $picker.find('input').val();\n            $.post($widget.attr('action'), {\n                '_csrf': csrf,\n                'action': 'setTime',\n                'time': time\n            }, (ret) => {\n                if (ret['success']) {\n                    window.location = window.location.href; // Reload ignoring POST data\n                } else {\n                    alert(ret['error']);\n                }\n            });\n        });\n    }\n}"]}