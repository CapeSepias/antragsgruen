define(["require","exports"],function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VotingBlock=void 0;var o=function(t){this.$element=t;var n=this.$element.find(".currentVoting"),o=t.data("voting"),r=t.data("url-poll"),c=t.data("url-vote");this.widget=new Vue({el:n[0],template:'\n                <div class="currentVotings">\n                <voting-block-widget v-for="voting in votings" :voting="voting" @vote="vote"></voting-block-widget>\n                </div>',data:function(){return{votings:o,pollingId:null}},methods:{vote:function(t,n,o,e){console.log(arguments),console.log(r),console.log(c);var i={_csrf:$("head").find("meta[name=csrf-token]").attr("content"),votes:[{itemType:n,itemId:o,vote:e}]},l=this,a=c.replace(/VOTINGBLOCKID/,t).replace(/ITEMTYPE/,n).replace(/ITEMID/,o);$.post(a,i,function(t){l.votings=t}).catch(function(t){alert(t.responseText)})},reloadData:function(){var n=this;$.get(r,function(t){n.votings=t}).catch(function(t){console.error("Could not load voting data from backend",t)})},startPolling:function(){var t=this;this.pollingId=window.setInterval(function(){t.reloadData()},3e3)}},beforeDestroy:function(){window.clearInterval(this.pollingId)},created:function(){this.startPolling()}})};n.VotingBlock=o});
//# sourceMappingURL=VotingBlock.js.map
