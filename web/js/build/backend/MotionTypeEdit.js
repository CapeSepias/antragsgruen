var MotionTypeEdit=function(){function e(){$(".deleteTypeOpener button").on("click",function(){$(".deleteTypeForm").removeClass("hidden"),$(".deleteTypeOpener").addClass("hidden")}),$('[data-toggle="tooltip"]').tooltip(),this.initSectionList(),this.initDeadlines(),this.initMotionInitiatorForm(),this.initAmendmentInitiatorForm()}return e.prototype.initMotionInitiatorForm=function(){var t=this,n=$(".motionSupporters .contactGender input"),a=$("#typeSupportType");a.on("changed.fu.selectlist",function(){var e=a.find("input").val();a.find('li[data-value="'+e+'"]').data("has-supporters")?($("#typeMinSupportersRow").removeClass("hidden"),$("#typeAllowMoreSupporters").removeClass("hidden"),t.motionsHaveSupporters=!0):($("#typeMinSupportersRow").addClass("hidden"),$("#typeAllowMoreSupporters").addClass("hidden"),t.motionsHaveSupporters=!1),n.trigger("change"),t.setMaxPdfSupporters()}).trigger("changed.fu.selectlist");var e=$("#sameInitiatorSettingsForAmendments input");e.on("change",function(){e.prop("checked")?$("section.amendmentSupporters").addClass("hidden"):$("section.amendmentSupporters").removeClass("hidden")}).trigger("change");var r=$(".motionSupporters input[name=initiatorCanBePerson]"),o=$(".motionSupporters input[name=initiatorCanBeOrganization]");r.on("change",function(){r.prop("checked")?$(".motionSupporters .formGroupGender").removeClass("hidden"):($(".motionSupporters .formGroupGender").addClass("hidden"),o.prop("checked")||o.prop("checked",!0).trigger("change"))}),o.on("change",function(){o.prop("checked")?$(".motionSupporters .formGroupResolutionDate").removeClass("hidden"):($(".motionSupporters .formGroupResolutionDate").addClass("hidden"),r.prop("checked")||r.prop("checked",!0).trigger("change"))}),n.on("change",function(){var e=parseInt(n.filter(":checked").val(),10),t=parseInt(a.find("input").val(),10);0===e||0===t?$(".motionSupporters .formGroupMinFemale").addClass("hidden"):$(".motionSupporters .formGroupMinFemale").removeClass("hidden")}).trigger("change")},e.prototype.initAmendmentInitiatorForm=function(){var t=this,n=$("#typeSupportTypeAmendment"),a=$(".amendmentSupporters .contactGender input");n.on("changed.fu.selectlist",function(){var e=n.find("input").val();n.find('li[data-value="'+e+'"]').data("has-supporters")?($("#typeMinSupportersRowAmendment").removeClass("hidden"),$("#typeAllowMoreSupportersAmendment").removeClass("hidden"),t.amendmentsHaveSupporters=!0):($("#typeMinSupportersRowAmendment").addClass("hidden"),$("#typeAllowMoreSupportersAmendment").addClass("hidden"),t.amendmentsHaveSupporters=!1),t.setMaxPdfSupporters(),a.trigger("change")}).trigger("changed.fu.selectlist");var e=$(".amendmentSupporters input[name=initiatorCanBePerson]"),r=$(".amendmentSupporters input[name=initiatorCanBeOrganization]");e.on("change",function(){e.prop("checked")?$(".amendmentSupporters .formGroupGender").removeClass("hidden"):($(".amendmentSupporters .formGroupGender").addClass("hidden"),r.prop("checked")||r.prop("checked",!0).trigger("change"))}),r.on("change",function(){r.prop("checked")?$(".amendmentSupporters .formGroupResolutionDate").removeClass("hidden"):($(".amendmentSupporters .formGroupResolutionDate").addClass("hidden"),e.prop("checked")||e.prop("checked",!0).trigger("change"))}),a.on("change",function(){var e=parseInt(a.filter(":checked").val(),10),t=parseInt(n.find("input").val(),10);0===e||0===t?$(".amendmentSupporters .formGroupMinFemale").addClass("hidden"):$(".amendmentSupporters .formGroupMinFemale").removeClass("hidden")}).trigger("change")},e.prototype.setMaxPdfSupporters=function(){this.amendmentsHaveSupporters||this.motionsHaveSupporters?$("#typeMaxPdfSupportersRow").removeClass("hidden"):$("#typeMaxPdfSupportersRow").addClass("hidden")},e.prototype.initDeadlines=function(){$("#deadlineFormTypeComplex input").on("change",function(e){$(e.currentTarget).prop("checked")?($(".deadlineTypeSimple").addClass("hidden"),$(".deadlineTypeComplex").removeClass("hidden")):($(".deadlineTypeSimple").removeClass("hidden"),$(".deadlineTypeComplex").addClass("hidden"))}).trigger("change"),$(".datetimepicker").each(function(e,t){$(t).datetimepicker({locale:$(t).find("input").data("locale")})});var r=function(e){var n=e.find(".datetimepickerFrom"),a=e.find(".datetimepickerTo");n.datetimepicker({locale:n.find("input").data("locale")}),a.datetimepicker({locale:a.find("input").data("locale"),useCurrent:!1});var t=function(){!function(){var e=n.data("DateTimePicker").date(),t=a.data("DateTimePicker").date();return e&&t&&t.isBefore(e)}()?(n.removeClass("has-error"),a.removeClass("has-error")):(n.addClass("has-error"),a.addClass("has-error"))};n.on("dp.change",t),a.on("dp.change",t)};$(".deadlineEntry").each(function(e,t){r($(t))}),$(".deadlineHolder").each(function(e,t){var n=$(t),a=function(){var e=$(".deadlineRowTemplate").html();e=e.replace(/TEMPLATE/g,n.data("type"));var t=$(e);n.find(".deadlineList").append(t),r(t)};n.find(".deadlineAdder").on("click",a),n.on("click",".delRow",function(e){$(e.currentTarget).parents(".deadlineEntry").remove()}),0===n.find(".deadlineList").children().length&&a()})},e.prototype.initSectionList=function(){var r=$("#sectionsList"),o=0;r.data("sortable",Sortable.create(r[0],{handle:".drag-handle",animation:150})),r.on("click","a.remover",function(e){e.preventDefault();var t=$(this).parents("li").first(),n=t.data("id");bootbox.confirm(__t("admin","deleteMotionSectionConfirm"),function(e){e&&($(".adminTypeForm").append('<input type="hidden" name="sectionsTodelete[]" value="'+n+'">'),t.remove())})}),r.on("change",".sectionType",function(){var e=$(this).parents("li").first(),t=parseInt($(this).val());e.removeClass("title textHtml textSimple image tabularData"),0===t?e.addClass("title"):1===t?e.addClass("textSimple"):2===t?e.addClass("textHtml"):3===t?e.addClass("image"):4===t&&(e.addClass("tabularData"),0==e.find(".tabularDataRow ul > li").length&&e.find(".tabularDataRow .addRow").trigger("click").trigger("click").trigger("click"))}),r.find(".sectionType").trigger("change"),r.on("change",".maxLenSet",function(){var e=$(this).parents("li").first();$(this).prop("checked")?e.addClass("maxLenSet").removeClass("no-maxLenSet"):e.addClass("no-maxLenSet").removeClass("maxLenSet")}),r.find(".maxLenSet").trigger("change"),$(".sectionAdder").on("click",function(e){e.preventDefault();var t=$("#sectionTemplate").html();t=t.replace(/#NEW#/g,"new"+o);var n=$(t);r.append(n),o+=1,r.find(".sectionType").trigger("change"),r.find(".maxLenSet").trigger("change");var a=n.find(".tabularDataRow ul");a.data("sortable",Sortable.create(a[0],{handle:".drag-data-handle",animation:150}))});var i=0;r.on("click",".tabularDataRow .addRow",function(e){e.preventDefault();var t=$(this),n=t.parent().find("ul"),a=$(t.data("template").replace(/#NEWDATA#/g,"new"+i));i+=1,a.removeClass("no0").addClass("no"+n.children().length),n.append(a),a.find("input").trigger("focus")}),r.on("click",".tabularDataRow .delRow",function(e){var t=$(this);e.preventDefault(),bootbox.confirm(__t("admin","deleteDataConfirm"),function(e){e&&t.parents("li").first().remove()})}),r.find(".tabularDataRow ul").each(function(){$(this).data("sortable",Sortable.create(this,{handle:".drag-data-handle",animation:150}))})},e}();new MotionTypeEdit;
//# sourceMappingURL=MotionTypeEdit.js.map
