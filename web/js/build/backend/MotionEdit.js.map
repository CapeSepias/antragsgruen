{"version":3,"sources":["backend/MotionEdit.ts"],"names":["MotionEdit","lang","$","attr","datetimepicker","locale","data","format","find","click","addClass","removeClass","each","$holder","this","$textarea","ckeditor","AntragsgruenEditor_1","AntragsgruenEditor","editor","getEditor","parents","submit","parent","val","getData","append","ev","confirmed","$form","preventDefault","bootbox","confirm","__t","result","trigger","MotionSupporterEdit_1","MotionSupporterEdit"],"mappings":"kHAGA,IAAAA,GAAA,WACI,QAAAA,KACI,GAAIC,GAAOC,EAAE,QAAQC,KAAK,OAC1BD,GAAE,6BAA6BE,gBAC3BC,OAAQJ,IAEZC,EAAE,+BAA+BE,gBAC7BC,OAAQJ,IAEZC,EAAE,yBAAyBE,gBACvBC,OAAQH,EAAE,mBAAmBI,KAAK,UAClCC,OAAQ,MAEZL,EAAE,yBAAyBM,KAAK,UAAUC,MAAM,WAC5CP,EAAE,yBAAyBQ,SAAS,UACpCR,EAAE,yBAAyBS,YAAY,UACvCT,EAAE,qBAAqBU,KAAK,WACxB,GAAIC,GAAUX,EAAEY,MACZC,EAAYF,EAAQL,KAAK,eACzBQ,EAAW,GAAIC,GAAAC,mBAAmBH,EAAUZ,KAAK,OACjDgB,EAASH,EAASI,WAEtBL,GAAUM,QAAQ,QAAQC,OAAO,WAC7BP,EAAUQ,SAASf,KAAK,YAAYgB,IAAIL,EAAOM,eAGvDvB,EAAE,qBAAqBwB,OAAO,qDAGlCxB,EAAE,qBAAqBoB,OAAO,SAAUK,EAAIrB,GACxC,IAAIA,GAAkCA,EAAKsB,aAAc,EAAzD,CAGA,GAAIC,GAAQ3B,EAAEY,KACda,GAAGG,iBACHC,QAAQC,QAAQC,IAAI,QAAS,oBAAqB,SAAUC,GACpDA,GACAL,EAAMM,QAAQ,UAAWP,WAAa,SAKlD,GAAIQ,GAAAC,oBAAoBnC,EAAE,2BAElC,MAAAF,KAEA,IAAIA","file":"MotionEdit.js","sourcesContent":["import {MotionSupporterEdit} from \"./MotionSupporterEdit\";\nimport {AntragsgruenEditor} from \"../shared/AntragsgruenEditor\";\n\nclass MotionEdit {\n    constructor() {\n        let lang = $(\"html\").attr(\"lang\");\n        $(\"#motionDateCreationHolder\").datetimepicker({\n            locale: lang\n        });\n        $(\"#motionDateResolutionHolder\").datetimepicker({\n            locale: lang\n        });\n        $('#resolutionDateHolder').datetimepicker({\n            locale: $('#resolutionDate').data('locale'),\n            format: 'L'\n        });\n        $(\"#motionTextEditCaller\").find(\"button\").click(function () {\n            $(\"#motionTextEditCaller\").addClass(\"hidden\");\n            $(\"#motionTextEditHolder\").removeClass(\"hidden\");\n            $(\".wysiwyg-textarea\").each(function () {\n                let $holder = $(this),\n                    $textarea = $holder.find(\".texteditor\"),\n                    ckeditor = new AntragsgruenEditor($textarea.attr(\"id\")),\n                    editor = ckeditor.getEditor();\n\n                $textarea.parents(\"form\").submit(function () {\n                    $textarea.parent().find(\"textarea\").val(editor.getData());\n                });\n            });\n            $(\"#motionUpdateForm\").append(\"<input type='hidden' name='edittext' value='1'>\");\n        });\n\n        $(\".motionDeleteForm\").submit(function (ev, data) {\n            if (data && typeof(data.confirmed) && data.confirmed === true) {\n                return;\n            }\n            let $form = $(this);\n            ev.preventDefault();\n            bootbox.confirm(__t(\"admin\", \"delMotionConfirm\"), function (result) {\n                if (result) {\n                    $form.trigger(\"submit\", {'confirmed': true});\n                }\n            });\n        });\n\n        new MotionSupporterEdit($(\"#motionSupporterHolder\"));\n    }\n}\n\nnew MotionEdit();\n"]}