define(["require","exports","./MotionSupporterEdit","../shared/AntragsgruenEditor","../shared/AmendmentEditSinglePara","./MotionSupporterEdit"],function(t,e,n,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmendmentEdit=void 0;var d=function(){function t(){this.lang=$("html").attr("lang"),this.$editTextCaller=$("#amendmentTextEditCaller"),$("#amendmentDateCreationHolder").datetimepicker({locale:this.lang}),$("#amendmentDateResolutionHolder").datetimepicker({locale:this.lang}),$("#resolutionDateHolder").datetimepicker({locale:$("#resolutionDate").data("locale"),format:"L"}),this.$editTextCaller.find("button").on("click",this.textEditCalled.bind(this)),$(".wysiwyg-textarea .resetText").on("click",function(t){var e=$(t.currentTarget).parents(".wysiwyg-textarea").find(".texteditor");window.CKEDITOR.instances[e.attr("id")].setData(e.data("original-html")),$(t.currentTarget).parents(".modifiedActions").addClass("hidden")}),$(".amendmentDeleteForm").on("submit",function(t,e){if(!e||(e.confirmed,0)||!0!==e.confirmed){var n=$(this);t.preventDefault(),bootbox.confirm(__t("admin","delAmendmentConfirm"),function(t){t&&n.trigger("submit",{confirmed:!0})})}}),this.initVotingFunctions(),new n.MotionSupporterEdit($("#motionSupporterHolder"))}return t.prototype.textEditCalledMultiPara=function(){$(".wysiwyg-textarea").each(function(){var t=$(this).find(".texteditor"),e=new i.AntragsgruenEditor(t.attr("id")).getEditor();t.parents("form").on("submit",function(){t.parent().find("textarea.raw").val(e.getData()),void 0!==e.plugins.lite&&(e.plugins.lite.findPlugin(e).acceptAll(),t.parent().find("textarea.consolidated").val(e.getData()))})})},t.prototype.textEditCalled=function(){this.$editTextCaller.addClass("hidden"),$("#amendmentTextEditHolder").removeClass("hidden"),this.$editTextCaller.data("multiple-paragraphs")?this.textEditCalledMultiPara():new a.AmendmentEditSinglePara,$("#amendmentUpdateForm").append("<input type='hidden' name='edittext' value='1'>")},t.prototype.initVotingFunctions=function(){var t=$(".votingResultCloser"),e=$(".votingResultOpener"),n=$(".contentVotingResult, .contentVotingResultComment");e.on("click",function(){t.removeClass("hidden"),e.addClass("hidden"),n.removeClass("hidden")}),t.on("click",function(){t.addClass("hidden"),e.removeClass("hidden"),n.addClass("hidden")})},t}();e.AmendmentEdit=d});
//# sourceMappingURL=AmendmentEdit.js.map
