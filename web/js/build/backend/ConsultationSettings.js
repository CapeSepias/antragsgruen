define(["require","exports"],function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this.$form=t,this.initLogoUpload(),this.initUrlPath(),this.initTags(),this.initAdminMayEdit(),this.initSingleMotionMode(),$('[data-toggle="tooltip"]').tooltip()}return t.prototype.initUrlPath=function(){$(".urlPathHolder .shower a").click(function(t){t.preventDefault(),$(".urlPathHolder .shower").addClass("hidden"),$(".urlPathHolder .holder").removeClass("hidden")})},t.prototype.initSingleMotionMode=function(){$("#singleMotionMode").change(function(){$(this).prop("checked")?$("#forceMotionRow").removeClass("hidden"):$("#forceMotionRow").addClass("hidden")}).change()},t.prototype.initAdminMayEdit=function(){var i=$("#adminsMayEdit"),e=$("#iniatorsMayEdit").parents("label").first().parent();i.change(function(){if($(this).prop("checked"))e.removeClass("hidden");else{var t=__t("admin","adminMayEditConfirm");bootbox.confirm(t,function(t){t?(e.addClass("hidden"),e.find("input").prop("checked",!1)):i.prop("checked",!0)})}}),i.prop("checked")||e.addClass("hidden")},t.prototype.htmlEntityDecode=function(t){var i=document.createElement("div");return i.innerHTML=t,i.innerText},t.prototype.initTags=function(){var a=this;this.$form.submit(function(){var t,i=$("#tagsList").pillbox("items"),e=[],n=$('<input type="hidden" name="tags">');for(t=0;t<i.length;t++){var o=a.htmlEntityDecode(i[t].text);void 0===i[t].id?e.push({id:0,name:o}):e.push({id:i[t].id,name:o})}n.attr("value",JSON.stringify(e)),a.$form.append(n)}),Sortable.create(document.getElementById("tagsListUl"),{draggable:".pill"})},t.prototype.initLogoUpload=function(){var e=this.$form.find(".logoRow"),n=e.find(".uploadCol label .text");e.on("click",".imageChooserDd ul    a",function(t){t.preventDefault();var i=$(t.currentTarget).find("img").attr("src");e.find("input[name=consultationLogo]").val(i),0===e.find(".logoPreview img").length&&e.find(".logoPreview").prepend('<img src="" alt="">'),e.find(".logoPreview img").attr("src",i).removeClass("hidden"),n.text(n.data("title")),e.find("input[type=file]").val("")}),e.find("input[type=file]").change(function(){var t=e.find("input[type=file]").val().split("\\"),i=t[t.length-1];e.find("input[name=consultationLogo]").val(""),e.find(".logoPreview img").addClass("hidden"),n.text(i)})},t}();i.ConsultationSettings=e});
//# sourceMappingURL=ConsultationSettings.js.map
