define(["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this.$widget=t,this.csrf=this.$widget.find("input[name=_csrf]").val(),this.$form=this.$widget.find("form"),this.$widget.find(".writingOpener").click(this.openWriting.bind(this)),this.$form.submit(this.submitComment.bind(this)),this.$widget.find("textarea").keypress(function(t){t.originalEvent.metaKey&&13===t.originalEvent.keyCode&&e.submitComment(t)})}return t.prototype.openWriting=function(){this.$widget.addClass("writing"),this.$widget.find("textarea").focus()},t.prototype.submitComment=function(t){var e=this;t.preventDefault();var i={_csrf:this.csrf,comment:this.$widget.find("textarea").val(),id:this.$form.data("id")};$.post(this.$form.attr("action"),i,function(t){if(t.success){var i=e.$widget.find(".currentComment");i.find(".date").text(t.date_str),i.find(".name").text(t.user_str),i.find(".comment").html(t.text),i.removeClass("empty"),e.$widget.find("textarea").val(""),e.$widget.removeClass("writing")}else alert(t.message)})},t}();e.ProcedureComment=i});
//# sourceMappingURL=ProcedureComment.js.map
