define(["require","exports","./MotionSupporterEdit","../shared/AntragsgruenEditor"],function(e,t,n,i){"use strict";var o=function(){function e(){var e=$("html").attr("lang");$("#motionDateCreationHolder").datetimepicker({locale:e}),$("#motionDateResolutionHolder").datetimepicker({locale:e}),$("#resolutionDateHolder").datetimepicker({locale:$("#resolutionDate").data("locale"),format:"L"}),$("#motionTextEditCaller").find("button").click(function(){$("#motionTextEditCaller").addClass("hidden"),$("#motionTextEditHolder").removeClass("hidden"),$(".wysiwyg-textarea").each(function(){var e=$(this),t=e.find(".texteditor"),n=new i.AntragsgruenEditor(t.attr("id")),o=n.getEditor();t.parents("form").submit(function(){t.parent().find("textarea").val(o.getData())})}),$("#motionUpdateForm").append("<input type='hidden' name='edittext' value='1'>"),$(".checkAmendmentCollissions").length>0&&($(".wysiwyg-textarea .texteditor").on("focus",function(){$(".checkAmendmentCollissions").show(),$(".saveholder .save").prop("disabled",!0).hide()}),$(".checkAmendmentCollissions").show(),$(".saveholder .save").prop("disabled",!0).hide())});var t=function(){var e=$(".checkAmendmentCollissions").data("url"),t=[],n=$(".amendmentCollissionsHolder");$("#motionTextEditHolder").children().each(function(){var e=$(this);if(e.hasClass("wysiwyg-textarea")){var n=e.attr("id").replace("section_holder_","");t[n]=CKEDITOR.instances[e.find(".texteditor").attr("id")].getData()}}),$.post(e,{newSections:t,_csrf:$("#motionUpdateForm").find("> input[name=_csrf]").val()},function(e){n.html(e),n.find(".amendmentOverrideBlock > .texteditor").length>0&&(n.find(".amendmentOverrideBlock > .texteditor").each(function(){new i.AntragsgruenEditor($(this).attr("id"))}),$(".amendmentCollissionsHolder").scrollintoview({top_offset:-50})),$(".checkAmendmentCollissions").hide(),$(".saveholder .save").prop("disabled",!1).show()})};$(".checkAmendmentCollissions").click(function(e){e.preventDefault(),t()}),$("#motionUpdateForm").submit(function(){$(".amendmentCollissionsHolder .amendment-override-block > .texteditor").each(function(){var e=CKEDITOR.instances[$(this).attr("id")].getData();$(this).parents(".amendment-override-block").find("> textarea").val(e)})}),$(".motionDeleteForm").submit(function(e,t){if(!t||t.confirmed!==!0){var n=$(this);e.preventDefault(),bootbox.confirm(__t("admin","delMotionConfirm"),function(e){e&&n.trigger("submit",{confirmed:!0})})}}),new n.MotionSupporterEdit($("#motionSupporterHolder"))}return e}();new o});
//# sourceMappingURL=MotionEdit.js.map
