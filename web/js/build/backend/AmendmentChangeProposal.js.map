{"version":3,"sources":["backend/AmendmentChangeProposal.ts"],"names":["AmendmentChangeProposal","$widget","this","$statusDetails","find","initStatusSetter","initCommentForm","prototype","$form","_this","change","ev","data","$","currentTarget","prop","newVal","val","addClass","filter","removeClass","nosave","post","attr","setStatus","_csrf","console","log","fail","alert","trigger","exports"],"mappings":"yGAAA,IAAAA,EAAA,WAGI,SAAAA,EAAoBC,GAAAC,KAAAD,QAAAA,EAChBC,KAAKC,eAAiBF,EAAQG,KAAK,yCACnCF,KAAKG,iBAAiBJ,EAAQG,KAAK,gBACnCF,KAAKI,gBAAgBL,EAAQG,KAAK,yBA+B1C,OA5BYJ,EAAAO,UAAAF,iBAAR,SAAyBG,GAAzB,IAAAC,EAAAP,KAEIM,EAAMJ,KAAK,qBAAqBM,OAAO,SAACC,EAAIC,GACxC,GAAKC,EAAEF,EAAGG,eAAeC,KAAK,WAA9B,CAGA,IAAIC,EAASH,EAAEF,EAAGG,eAAeG,MACjCR,EAAKN,eAAee,SAAS,UAC7BT,EAAKN,eAAegB,OAAO,WAAaH,GAAQI,YAAY,UAExDR,GAAQA,EAAKS,QAGjBR,EAAES,KAAKd,EAAMe,KAAK,WACdC,UAAWR,EACXS,MAAOjB,EAAMJ,KAAK,qBAAqBa,OACxC,SAACN,GACAe,QAAQC,IAAIhB,KACbiB,KAAK,WACJC,MAAM,uBAEXC,QAAQ,UAAWT,OAAQ,KAG1BrB,EAAAO,UAAAD,gBAAR,SAAwBE,KAI5BR,KArCa+B,EAAA/B,wBAAAA","file":"AmendmentChangeProposal.js","sourcesContent":["export class AmendmentChangeProposal {\n    private $statusDetails: JQuery;\n\n    constructor(private $widget: JQuery) {\n        this.$statusDetails = $widget.find('.proposalStatusDetails .statusDetails');\n        this.initStatusSetter($widget.find('.statusForm'));\n        this.initCommentForm($widget.find('.proposalCommentForm'));\n    }\n\n    private initStatusSetter($form: JQuery)\n    {\n        $form.find(\"input[type=radio]\").change((ev, data: any) => {\n            if (!$(ev.currentTarget).prop('checked')) {\n                return;\n            }\n            let newVal = $(ev.currentTarget).val();\n            this.$statusDetails.addClass('hidden');\n            this.$statusDetails.filter('.status_' + newVal).removeClass('hidden');\n\n            if (data && data.nosave) {\n                return;\n            }\n            $.post($form.attr('action'), {\n                setStatus: newVal,\n                _csrf: $form.find('input[name=_csrf]').val()\n            }, (ev) => {\n                console.log(ev);\n            }).fail(() => {\n                alert(\"Could not save\");\n            });\n        }).trigger('change', {nosave: 1});\n    }\n\n    private initCommentForm($form: JQuery)\n    {\n        // @TODO\n    }\n}\n"]}