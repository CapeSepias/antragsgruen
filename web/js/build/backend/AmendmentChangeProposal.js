define(["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.$widget=t,this.$statusDetails=t.find(".proposalStatusDetails .statusDetails"),this.initStatusSetter(t.find(".statusForm")),this.initCommentForm(t.find(".proposalCommentForm"))}return t.prototype.initStatusSetter=function(t){var e=this;t.find("input[type=radio]").change(function(n,i){if($(n.currentTarget).prop("checked")){var a=$(n.currentTarget).val();e.$statusDetails.addClass("hidden"),e.$statusDetails.filter(".status_"+a).removeClass("hidden"),i&&i.nosave||$.post(t.attr("action"),{setStatus:a,_csrf:t.find("input[name=_csrf]").val()},function(t){console.log(t)}).fail(function(){alert("Could not save")})}}).trigger("change",{nosave:1})},t.prototype.initCommentForm=function(t){var e=!1,n=t.find(".commentList");t.submit(function(i){var a=t.find("textarea").val();i.preventDefault(),""==a||e||(e=!0,$.post(t.attr("action"),{writeComment:a,_csrf:t.find("input[name=_csrf]").val()},function(i){if(i.success){var a=$('<li><div class="header"><div class="date"></div><div class="name"></div></div><div class="comment"></div></li>');a.find(".date").text(i.comment.dateFormatted),a.find(".name").text(i.comment.username),a.find(".comment").text(i.comment.text),n.append(a),t.find("textarea").val(""),n[0].scrollTop=n[0].scrollHeight}else alert("Could not save: "+JSON.stringify(i));e=!1}).fail(function(){alert("Could not save"),e=!1}))}),n[0].scrollTop=n[0].scrollHeight},t}();e.AmendmentChangeProposal=n});
//# sourceMappingURL=AmendmentChangeProposal.js.map
