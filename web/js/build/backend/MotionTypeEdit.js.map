{"version":3,"sources":["backend/MotionTypeEdit.ts"],"names":["MotionTypeEdit","$","on","removeClass","addClass","tooltip","this","initSectionList","initDeadlines","initMotionInitiatorForm","initAmendmentInitiatorForm","prototype","_this","$initiatorGender","$supportType","selected","find","val","data","motionsHaveSupporters","trigger","setMaxPdfSupporters","$sameSettings","prop","$initiatorCanBePerson","$initiatorCanBeOrga","parseInt","filter","supportType","amendmentsHaveSupporters","ev","currentTarget","each","i","el","datetimepicker","locale","initLinkedDeadlinePickers","$row","$from","$to","useCurrent","setErrorState","fromDate","date","toDate","isBefore","hasError","$deadlineHolder","addDeadlineRow","html","replace","$newRow","append","parents","remove","children","length","$list","newCounter","Sortable","create","handle","animation","preventDefault","$sectionHolder","first","delId","bootbox","confirm","__t","result","$li","newStr","$newObj","$tab","dataNewCounter","$this","$ul","parent"],"mappings":"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","file":"MotionTypeEdit.js","sourcesContent":["declare var Sortable;\n\nclass MotionTypeEdit {\n    private motionsHaveSupporters: boolean;\n    private amendmentsHaveSupporters: boolean;\n\n    constructor() {\n        $('.deleteTypeOpener button').on('click', () => {\n            $('.deleteTypeForm').removeClass('hidden');\n            $('.deleteTypeOpener').addClass('hidden');\n        });\n\n        $('[data-toggle=\"tooltip\"]').tooltip();\n\n        this.initSectionList();\n        this.initDeadlines();\n        this.initMotionInitiatorForm();\n        this.initAmendmentInitiatorForm();\n    }\n\n    private initMotionInitiatorForm() {\n        const $initiatorGender = $(\".motionSupporters .contactGender input\");\n\n        const $supportType = $('#typeSupportType');\n        $supportType.on('changed.fu.selectlist', () => {\n            const selected = $supportType.find('input').val();\n            const hasSupporters = $supportType.find(\"li[data-value=\\\"\" + selected + \"\\\"]\").data(\"has-supporters\");\n\n            if (hasSupporters) {\n                $('#typeMinSupportersRow').removeClass('hidden');\n                $('#typeAllowMoreSupporters').removeClass('hidden');\n                this.motionsHaveSupporters = true;\n            } else {\n                $('#typeMinSupportersRow').addClass('hidden');\n                $('#typeAllowMoreSupporters').addClass('hidden');\n                this.motionsHaveSupporters = false;\n            }\n            $initiatorGender.trigger(\"change\");\n            this.setMaxPdfSupporters();\n        }).trigger('changed.fu.selectlist');\n\n        const $sameSettings = $(\"#sameInitiatorSettingsForAmendments input\");\n        $sameSettings.on(\"change\", () => {\n            if ($sameSettings.prop(\"checked\")) {\n                $('section.amendmentSupporters').addClass(\"hidden\");\n            } else {\n                $('section.amendmentSupporters').removeClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n\n        const $initiatorCanBePerson = $(\".motionSupporters input[name=initiatorCanBePerson]\");\n        const $initiatorCanBeOrga = $(\".motionSupporters input[name=initiatorCanBeOrganization]\");\n        $initiatorCanBePerson.on(\"change\", () => {\n            if ($initiatorCanBePerson.prop(\"checked\")) {\n                $(\".motionSupporters .formGroupGender\").removeClass(\"hidden\");\n            } else {\n                $(\".motionSupporters .formGroupGender\").addClass(\"hidden\");\n                if (!$initiatorCanBeOrga.prop(\"checked\")) {\n                    $initiatorCanBeOrga.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n        $initiatorCanBeOrga.on(\"change\", () => {\n            if ($initiatorCanBeOrga.prop(\"checked\")) {\n                $(\".motionSupporters .formGroupResolutionDate\").removeClass(\"hidden\");\n            } else {\n                $(\".motionSupporters .formGroupResolutionDate\").addClass(\"hidden\");\n                if (!$initiatorCanBePerson.prop(\"checked\")) {\n                    $initiatorCanBePerson.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n\n        $initiatorGender.on(\"change\", () => {\n            const selected = parseInt($initiatorGender.filter(\":checked\").val() as string, 10);\n            const supportType = parseInt($supportType.find('input').val() as string, 10);\n            if (selected === 0 || supportType === 0) {\n                $(\".motionSupporters .formGroupMinFemale\").addClass(\"hidden\");\n            } else {\n                $(\".motionSupporters .formGroupMinFemale\").removeClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private initAmendmentInitiatorForm() {\n        const $supportType = $('#typeSupportTypeAmendment');\n        const $initiatorGender = $(\".amendmentSupporters .contactGender input\");\n\n        $supportType.on('changed.fu.selectlist', () => {\n            const selected = $supportType.find('input').val();\n            const hasSupporters = $supportType.find(\"li[data-value=\\\"\" + selected + \"\\\"]\").data(\"has-supporters\");\n\n            if (hasSupporters) {\n                $('#typeMinSupportersRowAmendment').removeClass('hidden');\n                $('#typeAllowMoreSupportersAmendment').removeClass('hidden');\n                this.amendmentsHaveSupporters = true;\n            } else {\n                $('#typeMinSupportersRowAmendment').addClass('hidden');\n                $('#typeAllowMoreSupportersAmendment').addClass('hidden');\n                this.amendmentsHaveSupporters = false;\n            }\n            this.setMaxPdfSupporters();\n            $initiatorGender.trigger(\"change\");\n        }).trigger('changed.fu.selectlist');\n\n        const $initiatorCanBePerson = $(\".amendmentSupporters input[name=initiatorCanBePerson]\");\n        const $initiatorCanBeOrga = $(\".amendmentSupporters input[name=initiatorCanBeOrganization]\");\n        $initiatorCanBePerson.on(\"change\", () => {\n            if ($initiatorCanBePerson.prop(\"checked\")) {\n                $(\".amendmentSupporters .formGroupGender\").removeClass(\"hidden\");\n            } else {\n                $(\".amendmentSupporters .formGroupGender\").addClass(\"hidden\");\n                if (!$initiatorCanBeOrga.prop(\"checked\")) {\n                    $initiatorCanBeOrga.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n        $initiatorCanBeOrga.on(\"change\", () => {\n            if ($initiatorCanBeOrga.prop(\"checked\")) {\n                $(\".amendmentSupporters .formGroupResolutionDate\").removeClass(\"hidden\");\n            } else {\n                $(\".amendmentSupporters .formGroupResolutionDate\").addClass(\"hidden\");\n                if (!$initiatorCanBePerson.prop(\"checked\")) {\n                    $initiatorCanBePerson.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n\n        $initiatorGender.on(\"change\", () => {\n            const selected = parseInt($initiatorGender.filter(\":checked\").val() as string, 10);\n            const supportType = parseInt($supportType.find('input').val() as string, 10);\n            if (selected === 0 || supportType === 0) {\n                $(\".amendmentSupporters .formGroupMinFemale\").addClass(\"hidden\");\n            } else {\n                $(\".amendmentSupporters .formGroupMinFemale\").removeClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private setMaxPdfSupporters() {\n        if (this.amendmentsHaveSupporters || this.motionsHaveSupporters) {\n            $('#typeMaxPdfSupportersRow').removeClass('hidden');\n        } else {\n            $('#typeMaxPdfSupportersRow').addClass('hidden');\n        }\n    }\n\n    private initDeadlines() {\n        $('#deadlineFormTypeComplex input').on(\"change\", (ev) => {\n            if ($(ev.currentTarget).prop('checked')) {\n                $('.deadlineTypeSimple').addClass('hidden');\n                $('.deadlineTypeComplex').removeClass('hidden');\n            } else {\n                $('.deadlineTypeSimple').removeClass('hidden');\n                $('.deadlineTypeComplex').addClass('hidden');\n            }\n        }).trigger('change');\n\n        $('.datetimepicker').each((i, el) => {\n            $(el).datetimepicker({\n                locale: $(el).find(\"input\").data('locale')\n            });\n        });\n\n        const initLinkedDeadlinePickers = ($row) => {\n            let $from = $row.find(\".datetimepickerFrom\"),\n                $to = $row.find(\".datetimepickerTo\");\n            $from.datetimepicker({\n                locale: $from.find(\"input\").data('locale')\n            });\n            $to.datetimepicker({\n                locale: $to.find(\"input\").data('locale'),\n                useCurrent: false\n            });\n\n            const hasError = () => {\n                const fromDate = $from.data(\"DateTimePicker\").date(),\n                    toDate = $to.data(\"DateTimePicker\").date();\n\n                return (fromDate && toDate && toDate.isBefore(fromDate));\n            };\n\n            const setErrorState = () => {\n                if (hasError()) {\n                    $from.addClass(\"has-error\");\n                    $to.addClass(\"has-error\");\n                } else {\n                    $from.removeClass(\"has-error\");\n                    $to.removeClass(\"has-error\");\n                }\n            };\n\n            $from.on(\"dp.change\", setErrorState);\n            $to.on(\"dp.change\", setErrorState);\n        };\n\n        $('.deadlineEntry').each((i, el) => {\n            initLinkedDeadlinePickers($(el));\n        });\n\n        $('.deadlineHolder').each((i, el) => {\n            const $deadlineHolder = $(el),\n                addDeadlineRow = () => {\n                    let html = $('.deadlineRowTemplate').html();\n                    html = html.replace(/TEMPLATE/g, $deadlineHolder.data('type'));\n                    let $newRow = $(html);\n                    $deadlineHolder.find('.deadlineList').append($newRow);\n                    initLinkedDeadlinePickers($newRow);\n                };\n            $deadlineHolder.find('.deadlineAdder').on(\"click\", addDeadlineRow);\n            $deadlineHolder.on('click', '.delRow', (ev) => {\n                $(ev.currentTarget).parents('.deadlineEntry').remove();\n            });\n            if ($deadlineHolder.find('.deadlineList').children().length === 0) {\n                addDeadlineRow();\n            }\n        });\n    }\n\n    private initSectionList() {\n        let $list = $('#sectionsList'),\n            newCounter = 0;\n\n        $list.data(\"sortable\", Sortable.create(<HTMLElement>$list[0], {\n            handle: '.drag-handle',\n            animation: 150\n        }));\n        $list.on('click', 'a.remover', function (ev) {\n            ev.preventDefault();\n            let $sectionHolder = $(this).parents('li').first(),\n                delId = $sectionHolder.data('id');\n            bootbox.confirm(__t('admin', 'deleteMotionSectionConfirm'), function (result) {\n                if (result) {\n                    $('.adminTypeForm').append('<input type=\"hidden\" name=\"sectionsTodelete[]\" value=\"' + delId + '\">');\n                    $sectionHolder.remove();\n                }\n            });\n        });\n        $list.on('change', '.sectionType', function () {\n            let $li = $(this).parents('li').first(),\n                val = parseInt($(this).val() as string);\n            $li.removeClass('title textHtml textSimple image tabularData');\n            if (val === 0) {\n                $li.addClass('title');\n            } else if (val === 1) {\n                $li.addClass('textSimple');\n            } else if (val === 2) {\n                $li.addClass('textHtml');\n            } else if (val === 3) {\n                $li.addClass('image');\n            } else if (val === 4) {\n                $li.addClass('tabularData');\n                if ($li.find('.tabularDataRow ul > li').length == 0) {\n                    $li.find('.tabularDataRow .addRow').trigger(\"click\").trigger(\"click\").trigger(\"click\");\n                }\n            }\n        });\n        $list.find('.sectionType').trigger('change');\n        $list.on('change', '.maxLenSet', function () {\n            let $li = $(this).parents('li').first();\n            if ($(this).prop('checked')) {\n                $li.addClass('maxLenSet').removeClass('no-maxLenSet');\n            } else {\n                $li.addClass('no-maxLenSet').removeClass('maxLenSet');\n            }\n        });\n        $list.find('.maxLenSet').trigger('change');\n\n        $('.sectionAdder').on('click', function (ev) {\n            ev.preventDefault();\n            let newStr = $('#sectionTemplate').html();\n            newStr = newStr.replace(/#NEW#/g, 'new' + newCounter);\n            let $newObj = $(newStr);\n            $list.append($newObj);\n            newCounter = newCounter + 1;\n\n            $list.find('.sectionType').trigger('change');\n            $list.find('.maxLenSet').trigger('change');\n\n            let $tab = $newObj.find('.tabularDataRow ul');\n            $tab.data(\"sortable\", Sortable.create(<HTMLElement>$tab[0], {\n                handle: '.drag-data-handle',\n                animation: 150\n            }));\n        });\n\n        let dataNewCounter = 0;\n        $list.on('click', '.tabularDataRow .addRow', function (ev) {\n            ev.preventDefault();\n            let $this = $(this),\n                $ul = $this.parent().find(\"ul\"),\n                $row = $($this.data('template').replace(/#NEWDATA#/g, 'new' + dataNewCounter));\n            dataNewCounter = dataNewCounter + 1;\n            $row.removeClass('no0').addClass('no' + $ul.children().length);\n            $ul.append($row);\n            $row.find('input').trigger('focus');\n        });\n\n        $list.on('click', '.tabularDataRow .delRow', function (ev) {\n            let $this = $(this);\n            ev.preventDefault();\n            bootbox.confirm(__t('admin', 'deleteDataConfirm'), function (result) {\n                if (result) {\n                    $this.parents(\"li\").first().remove();\n                }\n            });\n        });\n\n        $list.find('.tabularDataRow ul').each(function () {\n            let $this = $(this);\n            $this.data(\"sortable\", Sortable.create(this, {\n                handle: '.drag-data-handle',\n                animation: 150\n            }));\n        });\n    }\n}\n\n\nnew MotionTypeEdit();\n"]}