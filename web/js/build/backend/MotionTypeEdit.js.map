{"version":3,"sources":["backend/MotionTypeEdit.ts"],"names":["MotionTypeEdit","$","on","removeClass","addClass","tooltip","this","initCreateExplanation","initSectionList","initDeadlines","initInitiatorForm","$sameSettings","prop","trigger","prototype","initialized","$checkbox","$explanationHolder","$textarea_1","find","editor_1","AntragsgruenEditor_1","AntragsgruenEditor","attr","getEditor","parents","parent","val","getData","$form","_this","$initiatorGender","$supportType","$supportAllowMore","selected","parseInt","is","data","motionsHaveSupporters","setMaxPdfSupporters","$initiatorCanBePerson","$initiatorCanBeOrga","filter","supportType","amendmentsHaveSupporters","ev","currentTarget","each","i","el","$el","datetimepicker","locale","initLinkedDeadlinePickers","$row","$from","$to","useCurrent","setErrorState","fromDate","date","toDate","isBefore","hasError","$deadlineHolder","addDeadlineRow","html","replace","$newRow","append","remove","children","length","$list","newCounter","Sortable","create","handle","animation","preventDefault","$sectionHolder","first","delId","bootbox","confirm","__t","result","$li","newStr","$newObj","$tab","dataNewCounter","$this","$ul"],"mappings":"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","file":"MotionTypeEdit.js","sourcesContent":["declare var Sortable;\n\nimport {AntragsgruenEditor} from \"../shared/AntragsgruenEditor\";\n\nconst CONTACT_NONE = 0;\nconst CONTACT_OPTIONAL = 1;\nconst CONTACT_REQUIRED = 2;\n\n// noinspection JSUnusedGlobalSymbols\nconst SUPPORTER_ONLY_INITIATOR = 0;\n// noinspection JSUnusedGlobalSymbols\nconst SUPPORTER_GIVEN_BY_INITIATOR = 1;\nconst SUPPORTER_COLLECTING_SUPPORTERS = 2;\n\n// Synchronize with ISectionType\nconst TYPE_TITLE = 0;\nconst TYPE_TEXT_SIMPLE = 1;\nconst TYPE_TEXT_HTML = 2;\nconst TYPE_IMAGE = 3;\nconst TYPE_TABULAR = 4;\nconst TYPE_PDF_ATTACHMENT = 5;\nconst TYPE_PDF_ALTERNATIVE = 6;\nconst TYPE_VIDEO_EMBED = 7;\n\nclass MotionTypeEdit {\n    private motionsHaveSupporters: boolean;\n    private amendmentsHaveSupporters: boolean;\n\n    constructor() {\n        $('.deleteTypeOpener button').on('click', () => {\n            $('.deleteTypeForm').removeClass('hidden');\n            $('.deleteTypeOpener').addClass('hidden');\n        });\n\n        $('[data-toggle=\"tooltip\"]').tooltip();\n\n        this.initCreateExplanation();\n        this.initSectionList();\n        this.initDeadlines();\n\n        this.initInitiatorForm($(\"#motionSupportersForm\"));\n        this.initInitiatorForm($(\"#amendmentSupportersForm\"));\n\n        const $sameSettings = $(\"#sameInitiatorSettingsForAmendments input\");\n        $sameSettings.on(\"change\", () => {\n            if ($sameSettings.prop(\"checked\")) {\n                $('section.amendmentSupporters').addClass(\"hidden\");\n            } else {\n                $('section.amendmentSupporters').removeClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private initCreateExplanation() {\n        let initialized = false;\n        const $checkbox = $(\"#typeHasCreateExplanation\");\n        $checkbox.on(\"change\", () => {\n            const $explanationHolder = $(\"#typeCreateExplanationHolder\");\n            if ($checkbox.prop(\"checked\")) {\n                $explanationHolder.removeClass(\"hidden\");\n                if (!initialized) {\n                    initialized = true;\n                    const $textarea = $explanationHolder.find(\".texteditor\"),\n                        editor = (new AntragsgruenEditor($textarea.attr(\"id\"))).getEditor();\n                    $textarea.parents(\"form\").on(\"submit\", () => {\n                        $textarea.parent().find(\"textarea\").val(editor.getData());\n                    });\n                }\n            } else {\n                $explanationHolder.addClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private initInitiatorForm($form: JQuery) {\n        const $initiatorGender = $form.find(\".contactGender input\");\n\n        const $supportType = $form.find(\".supportType\");\n        const $supportAllowMore = $form.find(\".formGroupAllowMore input\");\n\n        $supportAllowMore.on('change', () => {\n            const selected = parseInt($supportType.find('input').val() as string, 10);\n            if ((selected === SUPPORTER_COLLECTING_SUPPORTERS || selected === SUPPORTER_GIVEN_BY_INITIATOR) && $supportAllowMore.is(':checked')) {\n                $form.find('.formGroupAllowAfterPub').removeClass('hidden');\n            } else {\n                $form.find('.formGroupAllowAfterPub').addClass('hidden');\n            }\n        }).trigger('change');\n\n        $supportType.on('changed.fu.selectlist', () => {\n            const selected = $supportType.find('input').val();\n            const hasSupporters = $supportType.find(\"li[data-value=\\\"\" + selected + \"\\\"]\").data(\"has-supporters\");\n\n            if (hasSupporters) {\n                $form.find('.formGroupMinSupporters').removeClass('hidden');\n                $form.find('.formGroupAllowMore').removeClass('hidden');\n                this.motionsHaveSupporters = true;\n            } else {\n                $form.find('.formGroupMinSupporters').addClass('hidden');\n                $form.find('.formGroupAllowMore').addClass('hidden');\n                this.motionsHaveSupporters = false;\n            }\n            $initiatorGender.trigger('change');\n            $supportAllowMore.trigger('change');\n            this.setMaxPdfSupporters();\n        }).trigger('changed.fu.selectlist');\n\n        const $initiatorCanBePerson = $form.find(\"input[name=initiatorCanBePerson]\");\n        const $initiatorCanBeOrga = $form.find(\"input[name=initiatorCanBeOrganization]\");\n        $initiatorCanBePerson.on(\"change\", () => {\n            if ($initiatorCanBePerson.prop(\"checked\")) {\n                $form.find(\".formGroupGender\").removeClass(\"hidden\");\n            } else {\n                $form.find(\".formGroupGender\").addClass(\"hidden\");\n                if (!$initiatorCanBeOrga.prop(\"checked\")) {\n                    $initiatorCanBeOrga.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n        $initiatorCanBeOrga.on(\"change\", () => {\n            if ($initiatorCanBeOrga.prop(\"checked\")) {\n                $form.find(\".formGroupResolutionDate\").removeClass(\"hidden\");\n            } else {\n                $form.find(\".formGroupResolutionDate\").addClass(\"hidden\");\n                if (!$initiatorCanBePerson.prop(\"checked\")) {\n                    $initiatorCanBePerson.prop(\"checked\", true).trigger(\"change\");\n                }\n            }\n        });\n\n        $initiatorGender.on(\"change\", () => {\n            const selected = parseInt($initiatorGender.filter(\":checked\").val() as string, 10);\n            const supportType = parseInt($supportType.find('input').val() as string, 10);\n            if (selected !== CONTACT_NONE && supportType === SUPPORTER_COLLECTING_SUPPORTERS) {\n                $form.find(\".formGroupMinFemale\").removeClass(\"hidden\");\n            } else {\n                $form.find(\".formGroupMinFemale\").addClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private setMaxPdfSupporters() {\n        if (this.amendmentsHaveSupporters || this.motionsHaveSupporters) {\n            $('#typeMaxPdfSupportersRow').removeClass('hidden');\n        } else {\n            $('#typeMaxPdfSupportersRow').addClass('hidden');\n        }\n    }\n\n    private initDeadlines() {\n        $('#deadlineFormTypeComplex').on(\"change\", (ev) => {\n            if ($(ev.currentTarget).prop('checked')) {\n                $('.deadlineTypeSimple').addClass('hidden');\n                $('.deadlineTypeComplex').removeClass('hidden');\n            } else {\n                $('.deadlineTypeSimple').removeClass('hidden');\n                $('.deadlineTypeComplex').addClass('hidden');\n            }\n        }).trigger('change');\n\n        $('.datetimepicker').each((i, el) => {\n            const $el = $(el);\n            $el.datetimepicker({\n                locale: $el.find(\"input\").data('locale')\n            });\n        });\n\n        const initLinkedDeadlinePickers = ($row) => {\n            let $from = $row.find(\".datetimepickerFrom\"),\n                $to = $row.find(\".datetimepickerTo\");\n            $from.datetimepicker({\n                locale: $from.find(\"input\").data('locale')\n            });\n            $to.datetimepicker({\n                locale: $to.find(\"input\").data('locale'),\n                useCurrent: false\n            });\n\n            const hasError = () => {\n                const fromDate = $from.data(\"DateTimePicker\").date(),\n                    toDate = $to.data(\"DateTimePicker\").date();\n\n                return (fromDate && toDate && toDate.isBefore(fromDate));\n            };\n\n            const setErrorState = () => {\n                if (hasError()) {\n                    $from.addClass(\"has-error\");\n                    $to.addClass(\"has-error\");\n                } else {\n                    $from.removeClass(\"has-error\");\n                    $to.removeClass(\"has-error\");\n                }\n            };\n\n            $from.on(\"dp.change\", setErrorState);\n            $to.on(\"dp.change\", setErrorState);\n        };\n\n        $('.deadlineEntry').each((i, el) => {\n            initLinkedDeadlinePickers($(el));\n        });\n\n        $('.deadlineHolder').each((i, el) => {\n            const $deadlineHolder = $(el),\n                addDeadlineRow = () => {\n                    let html = $('.deadlineRowTemplate').html();\n                    html = html.replace(/TEMPLATE/g, $deadlineHolder.data('type'));\n                    let $newRow = $(html);\n                    $deadlineHolder.find('.deadlineList').append($newRow);\n                    initLinkedDeadlinePickers($newRow);\n                };\n            $deadlineHolder.find('.deadlineAdder').on(\"click\", addDeadlineRow);\n            $deadlineHolder.on('click', '.delRow', (ev) => {\n                $(ev.currentTarget).parents('.deadlineEntry').remove();\n            });\n            if ($deadlineHolder.find('.deadlineList').children().length === 0) {\n                addDeadlineRow();\n            }\n        });\n    }\n\n    private initSectionList() {\n        let $list = $('#sectionsList'),\n            newCounter = 0;\n\n        $list.data(\"sortable\", Sortable.create(<HTMLElement>$list[0], {\n            handle: '.drag-handle',\n            animation: 150\n        }));\n        $list.on('click', 'a.remover', function (ev) {\n            ev.preventDefault();\n            let $sectionHolder = $(this).parents('li').first(),\n                delId = $sectionHolder.data('id');\n            bootbox.confirm(__t('admin', 'deleteMotionSectionConfirm'), function (result) {\n                if (result) {\n                    $('.adminTypeForm').append('<input type=\"hidden\" name=\"sectionsTodelete[]\" value=\"' + delId + '\">');\n                    $sectionHolder.remove();\n                }\n            });\n        });\n        $list.on('change', '.sectionType', function () {\n            let $li = $(this).parents('li').first(),\n                val = parseInt($(this).val() as string);\n            $li.removeClass('title textHtml textSimple image tabularData pdfAlternative pdfAttachment videoEmbed');\n            if (val === TYPE_TITLE) {\n                $li.addClass('title');\n            } else if (val === TYPE_TEXT_SIMPLE) {\n                $li.addClass('textSimple');\n            } else if (val === TYPE_TEXT_HTML) {\n                $li.addClass('textHtml');\n            } else if (val === TYPE_IMAGE) {\n                $li.addClass('image');\n            } else if (val === TYPE_TABULAR) {\n                $li.addClass('tabularData');\n                if ($li.find('.tabularDataRow ul > li').length == 0) {\n                    $li.find('.tabularDataRow .addRow').trigger(\"click\").trigger(\"click\").trigger(\"click\");\n                }\n            } else if (val === TYPE_PDF_ATTACHMENT) {\n                $li.addClass('pdfAttachment');\n            } else if (val === TYPE_PDF_ALTERNATIVE) {\n                $li.addClass('pdfAlternative');\n            } else if (val === TYPE_VIDEO_EMBED) {\n                $li.addClass('videoEmbed');\n            }\n        });\n        $list.find('.sectionType').trigger('change');\n        $list.on('change', '.maxLenSet', function () {\n            let $li = $(this).parents('li').first();\n            if ($(this).prop('checked')) {\n                $li.addClass('maxLenSet').removeClass('no-maxLenSet');\n            } else {\n                $li.addClass('no-maxLenSet').removeClass('maxLenSet');\n            }\n        });\n        $list.find('.maxLenSet').trigger('change');\n\n        $('.sectionAdder').on('click', function (ev) {\n            ev.preventDefault();\n            let newStr = $('#sectionTemplate').html();\n            newStr = newStr.replace(/#NEW#/g, 'new' + newCounter);\n            let $newObj = $(newStr);\n            $list.append($newObj);\n            newCounter = newCounter + 1;\n\n            $list.find('.sectionType').trigger('change');\n            $list.find('.maxLenSet').trigger('change');\n\n            let $tab = $newObj.find('.tabularDataRow ul');\n            $tab.data(\"sortable\", Sortable.create(<HTMLElement>$tab[0], {\n                handle: '.drag-data-handle',\n                animation: 150\n            }));\n        });\n\n        let dataNewCounter = 0;\n        $list.on('click', '.tabularDataRow .addRow', function (ev) {\n            ev.preventDefault();\n            let $this = $(this),\n                $ul = $this.parent().find(\"ul\"),\n                $row = $($this.data('template').replace(/#NEWDATA#/g, 'new' + dataNewCounter));\n            dataNewCounter = dataNewCounter + 1;\n            $row.removeClass('no0').addClass('no' + $ul.children().length);\n            $ul.append($row);\n            $row.find('input').trigger('focus');\n        });\n\n        $list.on('click', '.tabularDataRow .delRow', function (ev) {\n            let $this = $(this);\n            ev.preventDefault();\n            bootbox.confirm(__t('admin', 'deleteDataConfirm'), function (result) {\n                if (result) {\n                    $this.parents(\"li\").first().remove();\n                }\n            });\n        });\n\n        $list.find('.tabularDataRow ul').each(function () {\n            let $this = $(this);\n            $this.data(\"sortable\", Sortable.create(this, {\n                handle: '.drag-data-handle',\n                animation: 150\n            }));\n        });\n    }\n}\n\n\nnew MotionTypeEdit();\n"]}