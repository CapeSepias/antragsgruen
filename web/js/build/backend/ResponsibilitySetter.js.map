{"version":3,"sources":["backend/ResponsibilitySetter.ts"],"names":["ResponsibilitySetter","$list","this","on","userSelected","bind","saveComment","prototype","ev","preventDefault","$li","$","currentTarget","$row","parents","first","userId","data","name","find","text","url","post","_csrf","val","user","ret","removeClass","addClass","alert","comment","exports"],"mappings":"yGAAA,IAAAA,EAAA,WACI,SAAAA,EAAoBC,IAAAC,KAAAD,MAAAA,GACVE,GAAG,QAAS,wBAAyBD,KAAKE,aAAaC,KAAKH,OAClED,EAAME,GAAG,QAAS,qCAAsCD,KAAKI,YAAYD,KAAKH,OA0CtF,OAvCYF,EAAAO,UAAAH,aAAR,SAAqBI,GACjBA,EAAGC,iBACH,IAAMC,EAAMC,EAAEH,EAAGI,eACXC,EAAOH,EAAII,QAAQ,eAAeC,QAClCC,EAASN,EAAIO,KAAK,WAClBC,EAAOR,EAAIS,KAAK,SAASC,OACzBC,EAAMR,EAAKI,KAAK,YACtBN,EAAEW,KAAKD,EAAK,CACRE,MAASZ,EAAE,qBAAqBa,MAChCC,KAAMT,GACP,SAACU,GACIA,EAAa,SACbb,EAAKM,KAAK,aAAaQ,YAAY,YACnCjB,EAAIkB,SAAS,YACbf,EAAKM,KAAK,uBAAuBC,KAAKF,GAAMD,KAAK,UAAWD,IAE5Da,MAAM,qCAKV7B,EAAAO,UAAAD,YAAR,SAAoBE,GAChBA,EAAGC,iBACH,IAAMI,EAAOF,EAAEH,EAAGI,eAAeE,QAAQ,eAAeC,QAElDe,EAAUjB,EAAKM,KAAK,oCAAoCK,MACxDH,EAAMR,EAAKI,KAAK,YAEtBN,EAAEW,KAAKD,EAAK,CACRE,MAASZ,EAAE,qBAAqBa,MAChCM,QAAWA,GACZ,SAACJ,GACIA,EAAa,QACbb,EAAKM,KAAK,0BAA0BC,KAAKU,GAEzCD,MAAM,qCAItB7B,EA7CA,GAAa+B,EAAA/B,qBAAAA","file":"ResponsibilitySetter.js","sourcesContent":["export class ResponsibilitySetter {\n    constructor(private $list: JQuery) {\n        $list.on(\"click\", \".respHolder .respUser\", this.userSelected.bind(this));\n        $list.on(\"click\", \".respHolder .respCommentRow button\", this.saveComment.bind(this));\n    }\n\n    private userSelected(ev: Event) {\n        ev.preventDefault();\n        const $li = $(ev.currentTarget);\n        const $row = $li.parents(\".respHolder\").first();\n        const userId = $li.data(\"user-id\");\n        const name = $li.find(\".name\").text();\n        const url = $row.data(\"save-url\");\n        $.post(url, {\n            '_csrf': $('input[name=_csrf]').val(),\n            user: userId\n        }, (ret) => {\n            if (ret['success']) {\n                $row.find(\".respUser\").removeClass(\"selected\");\n                $li.addClass(\"selected\");\n                $row.find(\".responsibilityUser\").text(name).data(\"user-id\", userId);\n            } else {\n                alert(\"An error occurred while saving\")\n            }\n        });\n    }\n\n    private saveComment(ev: Event) {\n        ev.preventDefault();\n        const $row = $(ev.currentTarget).parents(\".respHolder\").first();\n\n        const comment = $row.find(\".respCommentRow input[type=text]\").val() as string;\n        const url = $row.data(\"save-url\");\n\n        $.post(url, {\n            '_csrf': $('input[name=_csrf]').val(),\n            'comment': comment\n        }, (ret) => {\n            if (ret['success']) {\n                $row.find(\".responsibilityComment\").text(comment);\n            } else {\n                alert(\"An error occurred while saving\")\n            }\n        });\n    }\n}\n"]}