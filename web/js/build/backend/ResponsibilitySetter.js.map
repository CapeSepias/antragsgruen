{"version":3,"sources":["backend/ResponsibilitySetter.ts"],"names":["ResponsibilitySetter","$list","this","find","on","userSelected","bind","saveComment","prototype","ev","preventDefault","$li","$","currentTarget","$row","parents","first","userId","data","name","text","url","post","_csrf","val","user","ret","removeClass","addClass","alert","comment","exports"],"mappings":"yGAAA,IAAAA,EAAA,WACI,SAAAA,EAAoBC,IAAAC,KAAAD,MAAAA,GACVE,KAAK,yBAAyBC,GAAG,QAASF,KAAKG,aAAaC,KAAKJ,OACvED,EAAME,KAAK,sCAAsCC,GAAG,QAASF,KAAKK,YAAYD,KAAKJ,OA0C3F,OAvCYF,EAAAQ,UAAAH,aAAR,SAAqBI,GACjBA,EAAGC,iBACH,IAAMC,EAAMC,EAAEH,EAAGI,eACXC,EAAOH,EAAII,QAAQ,eAAeC,QAClCC,EAASN,EAAIO,KAAK,WAClBC,EAAOR,EAAIR,KAAK,SAASiB,OACzBC,EAAMP,EAAKI,KAAK,YACtBN,EAAEU,KAAKD,EAAK,CACRE,MAASX,EAAE,qBAAqBY,MAChCC,KAAMR,GACP,SAACS,GACIA,EAAa,SACbZ,EAAKX,KAAK,aAAawB,YAAY,YACnChB,EAAIiB,SAAS,YACbd,EAAKX,KAAK,uBAAuBiB,KAAKD,GAAMD,KAAK,UAAWD,IAE5DY,MAAM,qCAKV7B,EAAAQ,UAAAD,YAAR,SAAoBE,GAChBA,EAAGC,iBACH,IAAMI,EAAOF,EAAEH,EAAGI,eAAeE,QAAQ,eAAeC,QAElDc,EAAUhB,EAAKX,KAAK,oCAAoCqB,MACxDH,EAAMP,EAAKI,KAAK,YAEtBN,EAAEU,KAAKD,EAAK,CACRE,MAASX,EAAE,qBAAqBY,MAChCM,QAAWA,GACZ,SAACJ,GACIA,EAAa,QACbZ,EAAKX,KAAK,0BAA0BiB,KAAKU,GAEzCD,MAAM,qCAItB7B,EA7CA,GAAa+B,EAAA/B,qBAAAA","file":"ResponsibilitySetter.js","sourcesContent":["export class ResponsibilitySetter {\n    constructor(private $list: JQuery) {\n        $list.find(\".respHolder .respUser\").on(\"click\", this.userSelected.bind(this));\n        $list.find(\".respHolder .respCommentRow button\").on(\"click\", this.saveComment.bind(this));\n    }\n\n    private userSelected(ev: Event) {\n        ev.preventDefault();\n        const $li = $(ev.currentTarget);\n        const $row = $li.parents(\".respHolder\").first();\n        const userId = $li.data(\"user-id\");\n        const name = $li.find(\".name\").text();\n        const url = $row.data(\"save-url\");\n        $.post(url, {\n            '_csrf': $('input[name=_csrf]').val(),\n            user: userId\n        }, (ret) => {\n            if (ret['success']) {\n                $row.find(\".respUser\").removeClass(\"selected\");\n                $li.addClass(\"selected\");\n                $row.find(\".responsibilityUser\").text(name).data(\"user-id\", userId);\n            } else {\n                alert(\"An error occurred while saving\")\n            }\n        });\n    }\n\n    private saveComment(ev: Event) {\n        ev.preventDefault();\n        const $row = $(ev.currentTarget).parents(\".respHolder\").first();\n\n        const comment = $row.find(\".respCommentRow input[type=text]\").val() as string;\n        const url = $row.data(\"save-url\");\n\n        $.post(url, {\n            '_csrf': $('input[name=_csrf]').val(),\n            'comment': comment\n        }, (ret) => {\n            if (ret['success']) {\n                $row.find(\".responsibilityComment\").text(comment);\n            } else {\n                alert(\"An error occurred while saving\")\n            }\n        });\n    }\n}\n"]}