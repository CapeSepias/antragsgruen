{"version":3,"sources":["backend/Theming.ts"],"names":["ImageChooser","$row","$uploadLabel","this","find","on","ev","preventDefault","src","$","currentTarget","attr","val","length","prepend","removeClass","text","data","change","path","split","filename","addClass","Theming","$form","_this","each","i","el","bootbox","confirm","result","append","submit","exports"],"mappings":"yGAAA,IAAAA,EACI,SAAoBC,GAChB,IAAMC,GADUC,KAAAF,KAAAA,GACUG,KAAK,0BAC/BH,EAAKI,GAAG,QAAS,uBAAwB,SAAAC,GACrCA,EAAGC,iBACH,IAAMC,EAAMC,EAAEH,EAAGI,eAAeN,KAAK,OAAOO,KAAK,OACjDV,EAAKG,KAAK,sBAAsBQ,IAAIJ,GACS,IAAzCP,EAAKG,KAAK,oBAAoBS,QAC9BZ,EAAKG,KAAK,gBAAgBU,QAAQ,uBAEtCb,EAAKG,KAAK,oBAAoBO,KAAK,MAAOH,GAAKO,YAAY,UAC3Db,EAAac,KAAKd,EAAae,KAAK,UACpChB,EAAKG,KAAK,oBAAoBQ,IAAI,MAEtCX,EAAKG,KAAK,oBAAoBc,OAAO,WACjC,IAAMC,EAAOlB,EAAKG,KAAK,oBAAoBQ,MAAMQ,MAAM,MACjDC,EAAWF,EAAKA,EAAKN,OAAS,GACpCZ,EAAKG,KAAK,sBAAsBQ,IAAI,IACpCX,EAAKG,KAAK,oBAAoBkB,SAAS,UACvCpB,EAAac,KAAKK,MAK9BE,EACI,SAAoBC,GAApB,IAAAC,EAAAtB,KAAoBA,KAAAqB,MAAAA,EAChBrB,KAAKqB,MAAMpB,KAAK,cAAcsB,KAAK,SAACC,EAAGC,GACnC,IAAI5B,EAAaS,EAAEmB,MAGvBzB,KAAKqB,MAAMnB,GAAG,QAAS,iBAAkB,SAACC,GACtCA,EAAGC,iBACHsB,QAAQC,QAAQrB,EAAEH,EAAGI,eAAeO,KAAK,WAAY,SAACc,GAC9CA,IACAN,EAAKD,MAAMQ,OAAO,qDAClBP,EAAKD,MAAMS,eAXlBC,EAAAX,QAAAA","file":"Theming.js","sourcesContent":["class ImageChooser {\n    constructor(private $row) {\n        const $uploadLabel = $row.find('.uploadCol label .text');\n        $row.on('click', '.imageChooserDd ul a', ev => {\n            ev.preventDefault();\n            const src = $(ev.currentTarget).find(\"img\").attr(\"src\");\n            $row.find('input[type=hidden]').val(src);\n            if ($row.find('.logoPreview img').length === 0) {\n                $row.find('.logoPreview').prepend('<img src=\"\" alt=\"\">');\n            }\n            $row.find('.logoPreview img').attr('src', src).removeClass('hidden');\n            $uploadLabel.text($uploadLabel.data('title'));\n            $row.find(\"input[type=file]\").val('');\n        });\n        $row.find(\"input[type=file]\").change(() => {\n            const path = $row.find(\"input[type=file]\").val().split('\\\\');\n            const filename = path[path.length - 1];\n            $row.find('input[type=hidden]').val('');\n            $row.find(\".logoPreview img\").addClass('hidden');\n            $uploadLabel.text(filename);\n        });\n    }\n}\n\nexport class Theming {\n    constructor(private $form: JQuery) {\n        this.$form.find('.row_image').each((i, el) => {\n            new ImageChooser($(el));\n        });\n\n        this.$form.on('click', '.btnResetTheme', (ev) => {\n            ev.preventDefault();\n            bootbox.confirm($(ev.currentTarget).data(\"confirm\"), (result) => {\n                if (result) {\n                    this.$form.append('<input type=\"hidden\" name=\"resetTheme\" value=\"1\">');\n                    this.$form.submit();\n                }\n            });\n        });\n    }\n}\n"]}