var SiteAccess=function(){function e(){this.initSite(),this.initUserList(),this.initAddUsers(),this.initDelUser(),this.initAdmins(),this.initConPwd()}return e.prototype.initSite=function(){$(".managedUserAccounts input").change(function(){$(this).prop("checked")?$(".showManagedUsers").removeClass("hidden"):$(".showManagedUsers").addClass("hidden")}).trigger("change")},e.prototype.initAddUsers=function(){$(".addUsersOpener").click(function(e){var t=$(e.currentTarget).data("type");$(".addUsersByLogin").addClass("hidden"),$(".addUsersByLogin."+t).removeClass("hidden")}),$("#accountsCreateForm").submit(function(e){if(!$(".addUsersByLogin.email").hasClass("hidden")){var t=$("#emailText").val();-1==t.indexOf("%ACCOUNT%")&&(bootbox.alert(__t("admin","emailMissingCode")),e.preventDefault()),-1==t.indexOf("%LINK%")&&(bootbox.alert(__t("admin","emailMissingLink")),e.preventDefault());var n=$("#emailAddresses").val().split("\n"),i=$("#names").val().split("\n");1==n.length&&""==n[0]&&(e.preventDefault(),bootbox.alert(__t("admin","emailMissingTo"))),n.length!=i.length&&(bootbox.alert(__t("admin","emailNumberMismatch")),e.preventDefault())}$(".addUsersByLogin.samlWW").hasClass("hidden")||""===$("#samlWW").val()&&(e.preventDefault(),bootbox.alert(__t("admin","emailMissingUsername")))})},e.prototype.initDelUser=function(){$(".accountListTable .deleteUser").on("click",function(e){e.preventDefault();var n=$(e.currentTarget),i=$(e.currentTarget).parents("form").first(),t=__t("admin","removeUserConfirm").replace(/%NAME%/,n.data("name"));bootbox.confirm(t,function(e){if(e){var t=n.data("id");i.append('<input type="hidden" name="deleteUser" value="'+t+'">'),i.submit()}})})},e.prototype.initUserList=function(){$(".accountListTable .accessViewCol input[type=checkbox]").change(function(){$(this).prop("checked")||$(this).parents("tr").first().find(".accessCreateCol input[type=checkbox]").prop("checked",!1)}),$(".accountListTable .accessCreateCol input[type=checkbox]").change(function(){$(this).prop("checked")&&$(this).parents("tr").first().find(".accessViewCol input[type=checkbox]").prop("checked",!0)})},e.prototype.initAdmins=function(){this.$adminForm=$("#adminForm"),this.$adminForm.on("click",".removeAdmin",function(e){var n=$(e.currentTarget),i=$(e.currentTarget).parents("form").first();bootbox.confirm(__t("admin","removeAdminConfirm"),function(e){if(e){var t=n.data("id");i.append('<input type="hidden" name="removeAdmin" value="'+t+'">'),i.submit()}})}),this.$adminForm.on("change",".adminCard .typeSite input",function(e){var t=$(e.currentTarget).parents(".adminCard").first();$(e.currentTarget).prop("checked")?t.find(".typeCon, .typeProposal").addClass("hidden"):t.find(".typeCon, .typeProposal").removeClass("hidden")}),this.$adminForm.find(".adminCard .typeSite input").trigger("change")},e.prototype.initConPwd=function(){var t=$(".loginMethods .conpw"),e=t.find(".setter input[type=checkbox]");e.change(function(){e.prop("checked")?t.addClass("checked"):t.removeClass("checked")}).trigger("change"),t.find(".setNewPassword").click(function(e){e.preventDefault(),e.stopPropagation(),t.addClass("changePwd")})},e}();new SiteAccess;
//# sourceMappingURL=SiteAccess.js.map
