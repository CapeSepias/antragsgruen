var SiteAccess=function(){function e(){this.initSite(),this.initUsers(),this.initAdmins()}return e.prototype.initSite=function(){$("#siteSettingsForm").find(".loginMethods .namespaced input").change(function(){$(this).prop("checked")?$("#accountsForm").removeClass("hidden"):$("#accountsForm").addClass("hidden")}).trigger("change"),$(".managedUserAccounts input").change(function(){$(this).prop("checked")?$(".showManagedUsers").show():$(".showManagedUsers").hide()}).trigger("change")},e.prototype.initUsers=function(){$("#accountsCreateForm").submit(function(e){var t=$("#emailText").val();-1==t.indexOf("%ACCOUNT%")&&(bootbox.alert(__t("admin","emailMissingCode")),e.preventDefault()),-1==t.indexOf("%LINK%")&&(bootbox.alert(__t("admin","emailMissingLink")),e.preventDefault());var n=$("#emailAddresses").val().split("\n"),i=$("#names").val().split("\n");1==n.length&&""==n[0]&&(e.preventDefault(),bootbox.alert(__t("admin","emailMissingTo"))),n.length!=i.length&&(bootbox.alert(__t("admin","emailNumberMismatch")),e.preventDefault())}),$(".accountListTable .accessViewCol input[type=checkbox]").change(function(){$(this).prop("checked")||$(this).parents("tr").first().find(".accessCreateCol input[type=checkbox]").prop("checked",!1)}),$(".accountListTable .accessCreateCol input[type=checkbox]").change(function(){$(this).prop("checked")&&$(this).parents("tr").first().find(".accessViewCol input[type=checkbox]").prop("checked",!0)})},e.prototype.initAdmins=function(){this.$adminForm=$("#adminForm"),this.$adminForm.on("click",".removeAdmin",function(e){var t=$(e.currentTarget),n=$(e.currentTarget).parents("form").first();bootbox.confirm(__t("admin","removeAdminConfirm"),function(e){if(e){var i=t.data("id");n.append('<input type="hidden" name="removeAdmin" value="'+i+'">'),n.submit()}})}),this.$adminForm.on("change",".adminCard .typeSite input",function(e){var t=$(e.currentTarget).parents(".adminCard").first();$(e.currentTarget).prop("checked")?t.find(".typeCon, .typeProposal").addClass("hidden"):t.find(".typeCon, .typeProposal").removeClass("hidden")}),this.$adminForm.find(".adminCard .typeSite input").trigger("change")},e}();new SiteAccess;
//# sourceMappingURL=SiteAccess.js.map
