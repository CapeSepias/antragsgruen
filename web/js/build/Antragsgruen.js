!function(g){var e=g("#antragsgruenScript"),t=requirejs.config({baseUrl:e.data("resource-base")+"js/build/"});g("[data-antragsgruen-load-class]").each(function(){var e=g(this).data("antragsgruen-load-class");t([e])}),g("[data-antragsgruen-widget]").each(function(){var a=g(this),n=a.data("antragsgruen-widget");t([n],function(e){var t=n.split("/");new e[t[t.length-1]](a)})}),g(".jsProtectionHint").each(function(){var e=g(this);g('<input type="hidden" name="jsprotection">').attr("value",e.data("value")).appendTo(e.parent()),e.remove()}),bootbox.setLocale(g("html").attr("lang").split("_")[0]),g(document).on("click",".amendmentAjaxTooltip",function(e){var n=g(e.currentTarget);if("0"==n.data("initialized")){n.data("initialized","1");var t="popover popover-amendment-ajax "+n.data("tooltip-extra-class"),a="right";n.data("placement")&&(a=n.data("placement")),n.popover({html:!0,trigger:"manual",container:"body",template:'<div class="'+t+'" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',placement:a,content:function(){var t="pop_"+(new Date).getTime(),e='<div id="'+t+'">Loading...</div>',a=n.data("url");return g.get(a,function(e){g("#"+t).html(e)}),e}})}g(".amendmentAjaxTooltip").not(n).popover("hide"),g(".ajaxAmendment").parents(".popover").remove(),n.popover("toggle")}),g(document).on("click",function(e){var t=g(e.target);t.hasClass("amendmentAjaxTooltip")||t.hasClass("popover")||0!=t.parents(".amendmentAjaxTooltip").length||0!=t.parents(".popover").length||(g(".amendmentAjaxTooltip").popover("hide"),g(".ajaxAmendment").parents(".popover").remove())}),document.body.addEventListener("mousedown",function(){document.body.classList.add("usingMouse")}),document.body.addEventListener("keydown",function(){document.body.classList.remove("usingMouse")});var u=function(e,s){var l=".",c=""===s||s[s.length-1]===l?s:s+l,p="0.";e.find("> li.agendaItem").each(function(){var e,t=g(this),a=t.find("> ol");if(t.hasClass("agendaItemDate"))e=s;else{var n=t.data("code");if("#"==n){var o=p.split(l);if(o[0].match(/^[a-y]$/i))o[0]=String.fromCharCode(o[0].charCodeAt(0)+1);else{var i=o[0].match(/^(.*[^0-9])?([0-9]*)$/),r=void 0===i[1]?"":i[1],d=parseInt(""==i[2]?"1":i[2]);o[0]=r+ ++d}p=e=o.join(l)}else e=p=(n+"").trim();""!==e&&(e=c+e),t.find("> div > h3 .code").text(e)}0<a.length&&u(a,e)})};g("ol.motionListWithinAgenda").on("antragsgruen:agenda-change",function(){u(g(this),"")}).trigger("antragsgruen:agenda-change"),g(".motionList .amendmentsToggler").each(function(e,t){var a=g(t);a.find("button").on("click",function(){a.toggleClass("closed"),a.toggleClass("opened"),a.next("ul.amendments").toggleClass("closed")})}),window.__t=function(e,t){return"undefined"==typeof ANTRAGSGRUEN_STRINGS?"@TRANSLATION STRINGS NOT LOADED":void 0===ANTRAGSGRUEN_STRINGS[e]?"@UNKNOWN CATEGORY: "+e:void 0===ANTRAGSGRUEN_STRINGS[e][t]?"@UNKNOWN STRING: "+e+" / "+t:ANTRAGSGRUEN_STRINGS[e][t]}}(jQuery);
//# sourceMappingURL=Antragsgruen.js.map
