!function(p){var t=p("#antragsgruenScript"),e=requirejs.config({baseUrl:t.data("resource-base")+"js/build/"});p("[data-antragsgruen-load-class]").each(function(){var t=p(this).data("antragsgruen-load-class");e([t])}),p("[data-antragsgruen-widget]").each(function(){var a=p(this),n=a.data("antragsgruen-widget");e([n],function(t){var e=n.split("/");new t[e[e.length-1]](a)})}),p(".jsProtectionHint").each(function(){var t=p(this);p('<input type="hidden" name="jsprotection">').attr("value",t.data("value")).appendTo(t.parent()),t.remove()}),bootbox.setLocale(p("html").attr("lang").split("_")[0]),p(document).on("click",".amendmentAjaxTooltip",function(t){var n=p(t.currentTarget);if("0"==n.data("initialized")){n.data("initialized","1");var e="popover popover-amendment-ajax "+n.data("tooltip-extra-class"),a="right";n.data("placement")&&(a=n.data("placement")),n.popover({html:!0,trigger:"manual",container:"body",template:'<div class="'+e+'" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',placement:a,content:function(){var e="pop_"+(new Date).getTime(),t='<div id="'+e+'">Loading...</div>',a=n.data("url");return p.get(a,function(t){p("#"+e).html(t)}),t}})}p(".amendmentAjaxTooltip").not(n).popover("hide"),p(".ajaxAmendment").parents(".popover").remove(),n.popover("toggle")}),p(document).on("click",function(t){var e=p(t.target);e.hasClass("amendmentAjaxTooltip")||e.hasClass("popover")||0!=e.parents(".amendmentAjaxTooltip").length||0!=e.parents(".popover").length||(p(".amendmentAjaxTooltip").popover("hide"),p(".ajaxAmendment").parents(".popover").remove())});var g=function(t,e){var l=".",s=""===e||e[e.length-1]===l?e:e+l,c="0.";t.find("> li.agendaItem").each(function(){var t,e=p(this),a=e.data("code"),n=e.find("> ol");if("#"==a){var o=c.split(l);if(o[0].match(/^[a-y]$/i))o[0]=String.fromCharCode(o[0].charCodeAt(0)+1);else{var i=o[0].match(/^(.*[^0-9])?([0-9]*)$/),r=void 0===i[1]?"":i[1],d=parseInt(""==i[2]?"1":i[2]);o[0]=r+ ++d}c=t=o.join(l)}else t=c=a+"";""!==t&&(t=s+t),e.find("> div > h3 .code").text(t),0<n.length&&g(n,t)})};p("ol.motionListWithinAgenda").on("antragsgruen:agenda-change",function(){g(p(this),"")}).trigger("antragsgruen:agenda-change"),p(".motionList .amendmentsToggler").each(function(t,e){var a=p(e);a.find("button").on("click",function(){a.toggleClass("closed"),a.toggleClass("opened"),a.next("ul.amendments").toggleClass("closed")})}),window.__t=function(t,e){return"undefined"==typeof ANTRAGSGRUEN_STRINGS?"@TRANSLATION STRINGS NOT LOADED":void 0===ANTRAGSGRUEN_STRINGS[t]?"@UNKNOWN CATEGORY: "+t:void 0===ANTRAGSGRUEN_STRINGS[t][e]?"@UNKNOWN STRING: "+t+" / "+e:ANTRAGSGRUEN_STRINGS[t][e]}}(jQuery);
//# sourceMappingURL=Antragsgruen.js.map
